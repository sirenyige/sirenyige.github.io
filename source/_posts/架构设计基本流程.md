---
title: 架构设计基本流程
date: 2021-04-07 00:11:31
categories:
- 架构设计
tags:
---

# 架构设计基本流程

<!-- more -->

## 一、识别复杂度

架构设计的本质目的是为了解决软件系统的复杂性，所以在我们设计架构时，首先就要分析系统的复杂性。

**将主要的复杂度问题列出来，然后根据业务、技术、团队等综合情况进行排序，优先解决当前面临的最主要的复杂度问题。**

## 二、设计备选方案

成熟的架构师需要对已经存在的技术非常熟悉，对已经经过验证的架构模式烂熟于心，然后根据自己对业务的理解，挑选合适的架构模式进行组合，再对组合后的方案进行修改和调整。

### 2.1 错误一：设计最优秀的方案

根据架构设计原则中“合适原则”和“简单原则“的要求，挑选合适自己业务、团队、技术能力的方案才是好方案；否则要么浪费大量资源开发了无用的系统，要么根本无法实现。

### 2.2 错误二：只做一个方案

只做一个方案有很多弊端：

1. 心里评估过于简单，可能没有想得全面，只是因为某一个缺点就把某个方案给否决了，而实际上没有哪个方案是完美的，某个地方有缺点的方案可能是综合来看最好的方案。
2. 经验知识和技能有局限，有可能某个评估的标准或者经验是不正确的，或者是老的经验不适合新的情况。
3. 单一方案设计会出现过度辩护的情况，即架构评审时，针对方案存在的问题和疑问，架构师会竭尽全力去为自己的设计进行辩护，经验不足的设计人员可能会强词夺理。

### 2.3 错误三：备选方案过于详细

有的架构师或者设计师在写备选方案时，错误地将备选方案等同于最终的方案，每个备选方案都写得很细。

- 耗费了大量的时间和精力
- 将注意力集中到细节中，忽略了整体的技术设计，导致备选方案数量不够或者差异不大
- 评审的时候其他人会被很多细节给绕进去，评审效果很差

## 三、评估和选择备选方案

在完成备选方案设计后，如何挑选出最终的方案也是一个很大的挑战，主要原因有：

- 每个方案都是可行的，如果方案不可行就根本不应该作为备选方案。
- 没有哪个方案是完美的。
- 评价标准主观性比较强。

**列出我们需要关注的质量属性点，然后分别从这些质量属性的维度去评估每个方案，再综合挑选适合当时情况的最优方案。**

误区：

- 数量对比法：简单地看哪个方案的优点多就选哪个。

  把所有质量属性的重要性等同，而没有考虑质量属性的优先级。

- 加权法：每个质量属性给一个权重，然后将每个方案的权重得分加起来，最后看哪个方案的权重得分最高就选哪个。

  无法客观地给出每个质量属性的权重得分。

正确的做法是**按优先级选择**，即综合当前的业务发展情况、团队人员规模和技能、业务发展预测等因素，将质量属性按照优先级排序，首先挑选满足第一优先级的，如果方案都满足，那就再看第二优先级……以此类推。

## 四、详细方案设计

**详细方案设计就是将方案涉及的关键技术细节给确定下来。**

详细设计方案阶段可能遇到的一种极端情况就是在详细设计阶段发现备选方案不可行，一般情况下主要的原因是备选方案设计时遗漏了某个关键技术点或者关键的质量属性。

避免措施：

- 架构师不但要进行备选方案设计和选型，还需要对备选方案的关键细节有较深入的理解。
- 通过分步骤、分阶段、分系统等方式，尽量降低方案复杂度，方案本身的复杂度越高，某个细节推翻整个方案的可能性就越高，适当降低复杂性，可以减少这种风险。
- 如果方案本身就很复杂，那就采取设计团队的方式来进行设计，博采众长，汇集大家的智慧和经验，防止只有 1~2 个架构师可能出现的思维盲点或者经验盲区。